Version 4
SHEET 1 1716 996
WIRE -48 -160 -512 -160
WIRE 224 -160 -48 -160
WIRE 848 -160 224 -160
WIRE -512 -144 -512 -160
WIRE -48 -128 -48 -160
WIRE -512 -48 -512 -64
WIRE -48 -32 -48 -64
WIRE 64 -32 -48 -32
WIRE -960 -16 -1024 -16
WIRE -864 -16 -960 -16
WIRE -704 -16 -784 -16
WIRE 224 -16 224 -160
WIRE -384 0 -512 0
WIRE -192 0 -384 0
WIRE -512 16 -512 0
WIRE -48 32 -48 -32
WIRE -608 64 -864 64
WIRE 176 64 160 64
WIRE -192 96 -192 0
WIRE -176 96 -192 96
WIRE 32 96 32 64
WIRE 160 96 160 64
WIRE 160 96 80 96
WIRE -704 112 -704 -16
WIRE -608 112 -608 64
WIRE -512 112 -512 96
WIRE 672 112 640 112
WIRE 720 112 672 112
WIRE 800 112 720 112
WIRE -384 128 -384 0
WIRE -256 128 -352 128
WIRE -960 144 -960 -16
WIRE 720 144 720 112
WIRE -416 160 -496 160
WIRE -224 160 -288 160
WIRE 128 160 128 -32
WIRE 224 160 224 80
WIRE 224 160 128 160
WIRE 272 160 224 160
WIRE 480 160 352 160
WIRE 640 160 640 112
WIRE 640 160 576 160
WIRE 800 160 800 112
WIRE -192 176 -192 96
WIRE -176 176 -192 176
WIRE 128 176 128 160
WIRE 128 176 80 176
WIRE 224 176 224 160
WIRE -960 192 -960 144
WIRE -864 192 -864 64
WIRE 480 192 400 192
WIRE 640 192 576 192
WIRE -704 208 -704 192
WIRE -496 208 -496 160
WIRE -496 208 -704 208
WIRE -416 208 -464 208
WIRE -704 240 -704 208
WIRE -704 240 -800 240
WIRE -608 240 -608 192
WIRE -464 240 -464 208
WIRE -464 240 -608 240
WIRE -704 256 -704 240
WIRE -608 256 -608 240
WIRE -224 256 -224 160
WIRE -176 256 -224 256
WIRE 176 256 80 256
WIRE 400 256 400 192
WIRE 496 256 400 256
WIRE 640 256 640 192
WIRE 640 256 576 256
WIRE 672 256 640 256
WIRE 720 256 720 224
WIRE 720 256 672 256
WIRE 800 256 800 224
WIRE 800 256 720 256
WIRE -384 288 -384 240
WIRE -352 288 -352 240
WIRE -352 288 -384 288
WIRE -256 288 -256 128
WIRE -256 288 -352 288
WIRE -48 336 -48 320
WIRE 224 336 224 272
WIRE 224 336 -48 336
WIRE 256 336 224 336
WIRE 272 336 256 336
WIRE 368 336 352 336
WIRE 400 336 400 256
WIRE 400 336 368 336
WIRE -960 352 -960 272
WIRE -864 352 -864 272
WIRE -800 352 -800 304
WIRE -704 352 -704 336
WIRE -608 352 -608 336
WIRE -384 352 -384 288
WIRE -48 352 -48 336
WIRE 256 368 256 336
WIRE 368 368 368 336
WIRE 848 400 848 -160
WIRE 848 400 512 400
WIRE 368 464 368 448
WIRE 592 464 368 464
WIRE 704 464 672 464
WIRE 512 496 512 400
WIRE 704 496 704 464
WIRE 368 512 368 464
WIRE 480 512 368 512
WIRE 704 528 704 496
WIRE 704 528 544 528
WIRE -1024 544 -1024 -16
WIRE 112 544 -1024 544
WIRE 256 544 256 448
WIRE 256 544 192 544
WIRE 480 544 256 544
WIRE 256 576 256 544
WIRE 512 576 512 560
WIRE 256 672 256 656
WIRE 512 672 512 656
FLAG -48 352 0
FLAG -512 -48 0
FLAG -800 352 0
FLAG -864 352 0
FLAG -384 352 0
FLAG -704 352 0
FLAG -608 352 0
FLAG -512 112 0
FLAG 672 112 out1
FLAG 672 256 out2
FLAG -960 352 0
FLAG -960 144 ref
FLAG 512 672 0
FLAG 256 672 0
FLAG 704 496 diff
SYMBOL nmos 176 -16 R0
WINDOW 3 56 89 Left 2
SYMATTR Value IRLML6244
SYMATTR InstName M1
SYMBOL nmos 176 176 R0
SYMATTR InstName M2
SYMATTR Value IRLML6244
SYMBOL voltage -512 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12V
SYMBOL cap 128 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 36 43 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.22µ
SYMBOL schottky -64 -128 R0
WINDOW 3 -155 0 Left 2
SYMATTR Value RBR1MM60A
SYMATTR InstName D1
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 704 128 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL cap 784 160 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL ltline 528 176 R0
SYMATTR InstName O1
SYMATTR Value LOSSY
SYMBOL res 592 240 R90
WINDOW 0 59 98 VBottom 2
WINDOW 3 34 33 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL voltage -864 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -98 231 Left 2
SYMATTR Value PULSE(0V 12V 0ns 62.832ns 62.832ns 0ns 125.664ns)
SYMATTR InstName V3
SYMBOL Comparators\\AD8561 -384 112 R0
WINDOW 3 39 145 Left 2
SYMATTR InstName U2
SYMBOL res -720 96 R0
SYMATTR InstName R5
SYMATTR Value 1.2k
SYMBOL res -720 240 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -624 240 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -624 96 R0
SYMATTR InstName R3
SYMATTR Value 1.2k
SYMBOL voltage -512 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5V
SYMBOL schottky -816 304 M180
WINDOW 0 42 31 Left 2
WINDOW 3 22 218 VLeft 2
SYMATTR InstName D2
SYMATTR Value RBR1MM60A
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -960 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 6V
SYMBOL bi -784 -16 R90
WINDOW 0 64 38 VBottom 2
WINDOW 3 -68 36 VTop 2
SYMATTR InstName B1
SYMATTR Value V=12*(V(diff)+1e5*idt(V(diff),0))
SYMBOL PowerProducts\\LTC4449 -48 176 R0
SYMATTR InstName U1
SYMBOL OpAmps\\AD8038 512 464 R0
SYMATTR InstName U3
SYMBOL res 368 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 0.01
SYMBOL res 240 352 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 352 352 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 688 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL voltage 512 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 50 32 Left 2
WINDOW 3 38 70 Left 2
SYMATTR InstName V6
SYMATTR Value -12V
SYMBOL res 208 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1Meg
SYMBOL res 240 560 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL voltage 256 160 M90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 0V
TEXT -968 504 Left 2 !.tran 100us
TEXT -968 456 Left 2 !,model LOSSY LTRA(L=241e-9 C=100e-12 R=40e-3 len=6)
